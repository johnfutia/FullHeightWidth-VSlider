!function(i){function e(i,e,n,s){i.addClass(e["class"]),i.children().first().addClass(n),i.children().last().addClass(s)}function n(e,n,s,t){var r;if(t){r=s.clone().appendTo(n),r.addClass("bw");var a=new Array;r.children().each(function(n){a[n]=i(this).find("img").attr("src"),i(this).css("background-image","url('"+e.cssFilePrefix+a[n]+"')")});var l=new Array;return s.children().each(function(n){l[n]=i(this).data("colorsrc"),i(this).css("background-image","url('"+e.cssFilePrefix+l[n]+"')")}),r}var c=new Array;return r.children().each(function(n){c[n]=i(this).find("img").attr("src"),i(this).css("background-image","url('"+e.cssFilePrefix+c[n]+"')")}),!1}function s(i,e,n,s){var t=n.children().first().index();a(i,e,n,s,t)}function t(i,e,n,s,t,l){r(i,e,n,s,l),a(i,e,n,s,t)}function r(e,n,s,t,r){i.fx.off=!0,i.fx.off=!i.fx.off,n.children().eq(r).css({opacity:"0",visibility:"visible"}).animate({opacity:1},100,function(){}),n.children().css("visibility","visible"),t.children().eq(r).fadeOut().removeClass("current-tslide")}function a(e,n,s,t,r){i.fx.off=!0,i.fx.off=!i.fx.off,n.children().eq(r).animate({opacity:0},100,function(){i(this).css({visibility:"hidden",opacity:"1"})}),t.children().eq(r).fadeIn().addClass("current-tslide")}i.TSlider=function(r,a){this.options={},r.data("TSlider",this),this.init=function(r,a){this.options=i.extend({},i.TSlider.defaultOptions,a),a=this.options;var l=a["class"]+"-slides",c=a["class"]+"-thumbs",d=null;e(r,a,l,c);var o=i("."+l),f=i("."+c),u=!1;a.bwToColor===!0&&(u=!0);var h=n(a,r,f,u),v=new Array,p=new Array;r.prepend('<div class="tdisplay"></div>');var y=i(".tdisplay"),x=0;o.children().each(function(){v[x]=i(this).data("imgsrc"),p[x]=i(this).html(),y.append('<div class="tslider-display-new t-display'+x+'" style="background-image: url(\''+a.cssFilePrefix+v[x]+"');\">"+p[x]+"</div>"),x++}),s(a,h,f,y);var b=0,g,m;a.autoScroll===!0&&(d=setInterval(function(){m=i(".current-tslide").index(),b+1<v.length?b++:b=0,t(a,h,f,y,b,m)},a.speed)),r.on("click","li",function(e){e.preventDefault(),clearInterval(d),m=i(".current-tslide").index(),g=i(this).index(),t(a,h,f,y,g,m),a.autoScroll===!0&&(b=g++,d=setInterval(function(){m=i(".current-tslide").index(),b+1<v.length?b++:b=0,t(a,h,f,y,b,m)},a.speed))})},this.init(r,a)},i.fn.TSlider=function(e){return this.each(function(){var n=new i.TSlider(i(this),e)})},i.TSlider.defaultOptions={"class":"t-slider",autoScroll:!0,speed:1e4,fadeSpeed:1e3,bwToColor:!0,cssFilePrefix:""}}(jQuery);